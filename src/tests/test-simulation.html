<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test ePuskesmas Form Simulation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="modern-theme.css">
</head>

<body>
    <div class="container">
        <h1><i class="fa-solid fa-flask"></i> ePuskesmas Form Simulation Test</h1>

        <div class="info-box">
            <strong>Testing Overview:</strong><br>
            This page helps you test the Medical Audio Recorder extension with the ePuskesmas form simulation.
            The extension should automatically populate the form fields when you generate a medical summary.
        </div>

        <div class="field-mapping">
            <h3><i class="fa-solid fa-list"></i> Field Mapping</h3>
            <p>The extension maps these JSON fields to form elements:</p>
            <ul>
                <li><span class="json-key">chief_complaint</span> â†’ <span
                        class="form-field">Anamnesa[keluhan_utama]</span></li>
                <li><span class="json-key">additional_complaint</span> â†’ <span
                        class="form-field">Anamnesa[keluhan_tambahan]</span></li>
                <li><span class="json-key">history_of_present_illness</span> â†’ <span
                        class="form-field">MRiwayatPasien[Riwayat Penyakit Sekarang][value]</span></li>
                <li><span class="json-key">past_medical_history</span> â†’ <span class="form-field">MRiwayatPasien[Riwayat
                        Penyakit Dulu][value]</span></li>
                <li><span class="json-key">family_history</span> â†’ <span class="form-field">MRiwayatPasien[Riwayat
                        Penyakit Keluarga][value]</span></li>
                <li><span class="json-key">recommended_medication_therapy</span> â†’ <span
                        class="form-field">Anamnesa[terapi]</span></li>
                <li><span class="json-key">recommended_non_medication_therapy</span> â†’ <span
                        class="form-field">Anamnesa[terapi_non_obat]</span></li>
                <li><span class="json-key">education</span> â†’ <span class="form-field">Anamnesa[edukasi]</span></li>
            </ul>
        </div>

        <div class="test-section">
            <h3><i class="fa-solid fa-rocket"></i> Test Steps</h3>
            <ol>
                <li><strong>Open the ePuskesmas Form Simulation:</strong> Click the button below to open the form
                    simulation in a new tab.</li>
                <li><strong>Open the Medical Audio Recorder Extension:</strong> Click the extension icon in your browser
                    toolbar.</li>
                <li><strong>Record or Upload Audio:</strong> Either record new audio or upload an existing audio file.
                </li>
                <li><strong>Transcribe:</strong> Click "Transcribe" to convert audio to text.</li>
                <li><strong>Edit Transcript (Optional):</strong> Review and edit the transcript if needed.</li>
                <li><strong>Summarize:</strong> Click "Summarize" to generate the medical summary.</li>
                <li><strong>Verify Form Population:</strong> Check that the form fields are automatically populated with
                    the summary data.</li>
            </ol>
        </div>

        <div class="test-section">
            <h3><i class="fa-solid fa-link"></i> Quick Links</h3>
            <a href="epuskesmas-simulation.html" target="_blank" class="btn btn-success">
                <i class="fa-solid fa-hospital"></i> Open ePuskesmas Form Simulation
            </a>
            <a href="example-form.html" target="_blank" class="btn">
                <i class="fa-solid fa-file-pen"></i> Open Simple Example Form
            </a>
        </div>

        <div class="test-section">
            <h3><i class="fa-solid fa-chart-bar"></i> Expected JSON Structure</h3>
            <p>The extension should generate JSON in this format:</p>
            <pre style="background: #f8f9fa; padding: 15px; border-radius: 5px; overflow-x: auto;">
{
  "chief_complaint": "Pasien mengeluh sakit kepala sejak 3 hari yang lalu",
  "additional_complaint": "Mual dan muntah ringan, pusing saat berdiri",
  "history_of_present_illness": "Sakit kepala berdenyut di bagian temporal, intensitas sedang",
  "past_medical_history": "Riwayat migrain 2 tahun lalu, hipertensi sejak 1 tahun",
  "family_history": "Ayah pasien memiliki riwayat hipertensi, ibu pasien diabetes",
  "recommended_medication_therapy": "Paracetamol 500mg 3x1 tablet, Omeprazole 20mg 1x1 tablet",
  "recommended_non_medication_therapy": "Istirahat cukup, hindari stres, diet rendah garam",
  "education": "Minum obat teratur, kontrol tekanan darah setiap minggu"
}</pre>
        </div>

        <div class="test-section">
            <h3><i class="fa-solid fa-wrench"></i> Troubleshooting</h3>
            <ul>
                <li><strong>Extension not working?</strong> Make sure the extension is enabled and you have granted
                    microphone permissions.</li>
                <li><strong>Form not populating?</strong> Check the browser console for any error messages.</li>
                <li><strong>Wrong field mapping?</strong> Verify that the form structure matches the expected ePuskesmas
                    format.</li>
                <li><strong>API errors?</strong> Ensure your OpenAI API key is configured correctly in the extension
                    settings.</li>
            </ul>
        </div>

        <div class="test-section">
            <h3><i class="fa-solid fa-file-pen"></i> Test Data</h3>
            <p>You can use this sample transcript for testing:</p>
            <blockquote style="background: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; margin: 0;">
                "Dokter: Selamat pagi, ada keluhan apa?<br>
                Pasien: Dokter, saya sakit kepala sudah 3 hari ini. Sakitnya berdenyut-denyut di bagian pelipis kanan.
                Kadang disertai mual dan muntah ringan. Kalau berdiri tiba-tiba pusing.<br>
                Dokter: Apakah ada riwayat sakit kepala sebelumnya?<br>
                Pasien: Ya dokter, 2 tahun lalu pernah migrain. Dan saya juga punya tekanan darah tinggi sejak setahun
                yang lalu.<br>
                Dokter: Bagaimana dengan keluarga, ada yang punya riwayat sakit kepala atau hipertensi?<br>
                Pasien: Ayah saya punya hipertensi, ibu saya diabetes.<br>
                Dokter: Baik, untuk sementara saya akan memberikan Paracetamol 500mg 3x1 tablet dan Omeprazole 20mg 1x1
                tablet. Istirahat yang cukup, hindari stres, dan diet rendah garam. Minum obat teratur dan kontrol
                tekanan darah setiap minggu."
            </blockquote>
        </div>
    </div>

    <script>
        // Add some interactive features
        document.addEventListener('DOMContentLoaded', function () {
            console.log("ðŸ§ª Test page loaded");

            // Add click tracking for analytics
            document.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function () {
                    console.log(`ðŸ”— Link clicked: ${this.href}`);
                });
            });
        });
    </script>
</body>

</html>